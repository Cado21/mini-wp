<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <!-- JQueryAJAX CDN -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

    <!-- Bootstrap CDN -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Fontawesome CDN -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>

    <!-- vue-wysiwyg-example -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="./js/vueWysiwyg.js"></script>

    <!-- Google Sign in -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="161145665026-7rebb5pidrvccuk4hof5289ul7hkahnv.apps.googleusercontent.com">
    <!-- Axios CDN -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!-- Sweer Alert CDN -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>

    <!-- SELECT 2 -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.min.js"></script>
    
    <link rel="stylesheet" href="./css/vueWysiwyg.css">

    <link rel="stylesheet" href="./css/style.css">
    <title>Document</title>
</head>

<body>

    <!-- Vue APP start HERE -->
    <div id="app">
        <div v-if="currentPage === 'signin'">
            <div class="formSection" id="signin-page">
                <div class="info">
                    <h2 class="brand">DeepPress</h2>
                    <i class="fab fa-envira icon"></i>
                    <p>Let's Build some website!</p>
                </div>
                <form class="form">
                    <h2>Sign In </h2>
                    <ul class="noBulletli">
                        <li>
                            <span class="error" v-if="emailError == true">Invalid Email Format</span>
                            <input type="email" class="inputFields" id="email" placeholder="Email" v-model="email" />
                        </li>
                        <li>
                            <span class="error" v-if="passwordError == true">Password Min (5) character</span>
                            <input type="password" class="inputFields" id="password" placeholder="Password" v-model="password" />
                        </li>
                        <li id="center-btn">
                            <button id="signin-btn" @click.prevent="signin()">Sign In</button>
                        </li>
                    </ul>
                    <small>Don't have account yet? Register <a @click.prevent="changePage('register')" href="#">here</a> </small>
                    <br>
                    <small>Or, login with</small>
                </form>
            </div>
        </div>
        <div v-else-if="currentPage === 'register'">
            <div class="formSection" id="register-page">
                <div class="info">
                    <h2 class="brand">DeepPress</h2>
                    <i class="fab fa-envira icon"></i>
                    <p>Let's Build some website!</p>
                </div>
                <form class="form">
                    <h2>Register</h2>
                    <ul class="noBulletli">
                        <li>
                            <span class="error" v-if="registerUsernameError == true">Username Min (5) character</span>
                            <input type="text" class="inputFields" id="username-register" placeholder="Username" v-model="registerUsername" />
                        </li>
                        <li>
                            <span class="error" v-if="registerPasswordError == true">Password Min(5) Character</span>
                            <input type="password" class="inputFields" id="password-register" placeholder="Password" v-model="registerPassword" />
                        </li>
                        <li>
                            <span class="error" v-if="registerPassword2Error == true">You retype different password! Please make it same!</span>
                            <input type="password" class="inputFields" placeholder="Password" v-model="registerPassword2" />
                        </li>
                        <li>
                            <span class="error" v-if="registerEmailError == true">Invalid Email Format</span>
                            <input type="email" class="inputFields" id="email-register" placeholder="Email" v-model="registerEmail" />
                        </li>
                        <li id="center-btn">
                            <button id="register-btn" @click.prevent="register">Register Now</button>
                        </li>
                    </ul>
                    <small>Already got an account? Login <a @click.prevent="changePage('signin')" href="#">here</a> </small>
                </form>
            </div>
        </div>
        <div v-else-if="currentPage === 'home'">
            <div class="sidenav" style="display: flex; justify-content: space-between; flex-direction: column">
                <div>
                    <a href="#" id="my-article-btn" @click="changeMainPage('myArticlePage')">
                        <span class="nav-icon" style="margin-right: 15px">
                                <i class="far fa-list-alt"></i>
                            </span>
                        <span> My Article</span>
                    </a>
                    <a href="#" id="all-article-btn" @click="changeMainPage('allArticlePage')">
                        <span class="nav-icon" style="margin-right: 15px">
                                <i class="fas fa-list"></i>
                            </span>
                        <span>
                                List of Articles
                            </span>
                    </a>
                    <a href="#" id="add-article-btn" @click="changeMainPage('addNewArticle')">
                        <span class="nav-icon" style="margin-right: 15px">
                                <i class="fas fa-plus-square"></i> 
                            </span>
                        <span> Add Article</span>
                    </a>
                </div>
                <div style="padding-bottom: 20px;">
                    <a href="#" id="logout-btn" @click.prevent="signout()">
                        <span class="nav-icon" style="margin-right: 15px">
                            <i class="fas fa-power-off"></i> 
                        </span> 
                        <span> Logout</span>
                    </a>
                </div>
            </div>

            <div class="main">
                <div v-if="mainPage == 'myArticlePage'">
                    <!-- My Article Page -->
                    <div class="main-container" id="myArticlePage">
                        <h3 class="m-3 article-header" style="text-align: center;">My Article</h3>
                        <!-- ARTICLE CARD -->
                        <div class="shadow pl-2 pt-3 mt-4" v-for="article in myArticle">
                            <div class="row">
                                <div class="col-2">
                                    <img v-bind:src="article.image" alt="image" width="80px">
                                </div>
                                <div class="col-10">
                                    <div>
                                        <h3 class="article-title" style="text-align: left">{{ article.title }}</h3>
                                        <div>
                                            <small>{{ convertDate( article.createdAt )}} - </small>
                                            <small class="font-weight-bold">By {{ article.userId.username}}</small>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;" class="mt-3">
                                            <ul class="tags">
                                                <li class="tag" v-for='tag in article.tags'>{{tag}}</li>
                                            </ul>
                                            <div style="margin-right: 20px; padding-top: 20px;">
                                                <!-- Masukin ID Article keparams -->
                                                <button class="viewMore-btn" @click="viewOne('oneArticle', article._id)">View More</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- COPY PASTE THIS THING -->

                        <!-- END OF CARD -->
                    </div>
                    <!-- END OF MY ARTICLE PAGE -->
                </div>
                <div v-else-if="mainPage == 'oneArticle'">
                    <!-- View One Article -->
                    <div class="main-container" id="oneArticle">
                        <!-- ARTICLE CARD -->
                        <div class="shadow pl-2 pt-3 mt-4">
                            <div class="row">
                                <div class="col-4">
                                    <img v-bind:src="viewOneArticle.image" alt="image" width="100%">
                                </div>
                                <div class="col-8">
                                    <div>
                                        <h3 class="article-title" style="text-align: left">{{viewOneArticle.title}}</h3>
                                        <div>
                                            <small>{{ convertDate (viewOneArticle.createdAt )}} - </small>
                                            <small class="font-weight-bold">By: {{ viewOneArticle.userId.username }}</small>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <ul class="tags">
                                                <li class="tag" v-for="tag in viewOneArticle.tags">{{tag}}</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <p class="article">{{viewOneArticle.content}}</p>
                                    <!-- <div v-if=" owner( viewOneArticle._id , viewOneArticle.userId ) "> -->
                                        <div class="wrap pt-3" style="text-align: center" >
                                            <a href="#" class="button2" @click.prevent="editArticlePage('editArticle', viewOneArticle._id )">Edit</a>
                                            <a href="#" class="button2" @click.prevent="deleteArticle( viewOneArticle._id )">Delete</a>
                                        </div>
                                    <!-- </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- END OF ONE ARTICLE -->
                </div>

                <div v-else-if="mainPage == 'allArticlePage'">
                    <!-- All Articles -->
                    <div class="main-container" id="allArticlePage">
                        <h3 class="m-3 article-header" style="text-align: center;">List of All Articles</h3>
                        <!-- ARTICLE CARD -->
                        <div class="shadow pl-2 pt-3 mt-4" v-for="article in articles">
                            <div class="row">
                                <div class="col-2">
                                    <img v-bind:src="article.image" alt="image" width="80px">
                                </div>
                                <div class="col-10">
                                    <div>
                                        <h3 class="article-title" style="text-align: left">{{article.title}}</h3>
                                        <div>
                                            <small>{{ convertDate(article.createdAt )}}- </small>
                                            <small class="font-weight-bold">By: {{ article.userId.username }}</small>
                                        </div>
                                        <div style="display: flex; justify-content: space-between;">
                                            <ul class="tags">
                                                <li class="tag" v-for="tag in article.tags">{{ tag }}</li>
                                            </ul>
                                            <div style="margin-right: 20px; padding-top: 20px;">
                                                <!-- Masukin ID Article keparams -->
                                                <button class="viewMore-btn" @click="viewOne('oneArticle', article._id)">View More</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END OF CARD -->
                    </div>
                    <!-- END OF ALL ARTICLE -->
                </div>


                <div v-else-if="mainPage == 'addNewArticle'">
                    <!-- Add New Article -->
                    <div class="main-container" id="addNewArticle">
                        <h3 class="m-3 article-header" style="text-align: center;">Add New Article</h3>
                        <div class="shadow newArticle">
                            <form>
                                <div class="form-group">
                                    <label><i class="fas fa-pencil-alt"></i> Title</label>
                                    <input type="text" class="form-control" placeholder="Some Title Here..." v-model="addTitle">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-tags"></i> Tags</label>
                                    
                                    <input type="text" class="form-control" placeholder="Tags" v-model="addTag">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-bookmark"></i> Content</label>
                                    <!-- <textarea class="form-control" rows="13" placeholder="Remember write something nice..."></textarea> -->
                                    <wysiwyg v-model="addContent"></wysiwyg>
                                </div>
                                <div class="form-group">
                                    <label><i class="far fa-images"></i> Image</label>
                                    <div class="file-input">
                                        <input type="file" class="form-control-file" @change="onFileChange">
                                    </div>
                                </div>
                                <div class="wrap" style="text-align: center">
                                    <a href="#" class="button2" style="background-color:darkslateblue; color:white" @click.prevent="addNewArticle()">Add Article</a>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- END OF ADD ARTICLE -->
                </div>
                <div v-else-if="mainPage == 'editArticle'">
                    <!-- Edit Article -->
                    <div class="main-container" id="editArticle">
                        <h3 class="m-3 article-header" style="text-align: center;">Edit Article</h3>
                        <div class="shadow newArticle">
                            <form>
                                <div class="form-group">

                                    <label><i class="fas fa-pencil-alt"></i> Title</label>
                                    <input type="text" class="form-control" placeholder="Some Title Here..." v-model="editTitle">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-tags"></i> Tags</label>
                                    <input type="text" class="form-control" placeholder="Tags" v-model="editTag">
                                </div>
                                <div class="form-group">
                                    <label><i class="fas fa-bookmark"></i> Content</label>
                                    <!-- <textarea class="form-control" rows="13" placeholder="Remember write something nice..."></textarea> -->
                                    <wysiwyg v-model="editContent"></wysiwyg>
                                </div>
                                <div class="form-group">
                                    <div>
                                        <img src="https://i.pinimg.com/originals/15/51/69/1551696c66b26f200c3ba94641316780.jpg" alt="image" width="80px">
                                    </div>
                                    <label><i class="far fa-images"></i> Image</label>
                                    <div class="file-input">
                                        <input type="text" class="form-control-file" v-model="editImage">
                                    </div>
                                </div>
                                <div class="wrap" style="text-align: center">
                                    <a href="#" class="button2" style="background-color:darkslateblue; color:white" @click.prevent="editArticle()">Edit Article</a>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!-- End Of Edit Article -->
                </div>
            </div>
        </div>


    </div>
    <!-- Vue App END HERE -->





   
    
    <!-- Vue JS CDN -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!-- Quill Library -->
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

    <!-- Vue JS -->
    <script src="./js/app.js"></script>

</body>

</html>